"use strict";function getParams(t){return!(npm_lifecycle_script.indexOf(t)<0)&&npm_lifecycle_script.split(t)[1].split(" ")[0]}function next(){if(!(tasks.length>0))return void Logs("you maybe need add adjust scripts commands");for(var t=arguments.length,i=Array(t),e=0;e<t;e++)i[e]=arguments[e];tasks.shift()(i)}function getGitPath(){fs.readFile(".git/config","utf-8",function(t,i){if(t)return Logs("please make sure you have '.git' file");next(i.split("url")[1].split(".git")[0].split(":")[1])})}function getDistFiles(t){function i(t){fs.readdirSync(t).forEach(function(s,a){var n=join(t,s),r=fs.statSync(n);!0===r.isDirectory()&&i(n),!0===r.isFile()&&e.push(n)})}var e=[];i(buildPath);var s=isMainJsPath?/^[\w-.\s()（）]+\.js$/:/^(main|index|app|default|base)[\w-.\s()（）]*\.js$/,a=e.filter(function(t){return s.test(t.indexOf("/")>-1?t.split("/")[t.split("/").length-1]:t.split("\\")[t.split("\\").length-1])});if(a.length&&!isMainJsPath)next(t.join(""),a[0]);else{if(!a.length||!isMainJsPath)return Logs(isMainJsPath?"make sure that the files you pack contain '.js' files":"make sure that the pack path  contain 'main*.js|base*.js|index*.js|default*.js|app*.js' file or add --mainJsPath=2 to your scripts command");next(t.join(""),a)}}function writePath(t){2===t.length&&(Array.isArray(t[1])?t[1].map(function(i){fs.appendFile(i,"\r\n\n\r;//# Romote_Git_Path="+t[0]+";\r\n\n\r",function(t){if(t)return Logs("failed to write in,"+t);Logs("success write in","succ")})}):fs.readFile(t[1],"utf-8",function(i,e){if(i)return Logs("unable to read remote directory");isMainJsPath&&fs.appendFile(t[1],"\r\n\n\r;//# Romote_Git_Path="+t[0]+";\r\n\n\r",function(t){if(t)return Logs("failed to write in"+t);Logs("success write in","succ")})}))}var fs=require("fs"),join=require("path").join,chalk=require("chalk"),Logs=function(t){switch(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warn"){case"succ":return console.log(chalk.yellow.bgGreen.bold("Success!")+chalk.green(t));case"warn":return console.log(chalk.red.bold("Failed! %s"),t)}},canPaly=!0,npm_lifecycle_script=process.env.npm_lifecycle_script+" "||"",isMainJsPath=1*getParams("--mainJsPath=")==2;npm_lifecycle_script||(canPaly=!1,Logs("unable to get params"));var PathArr=!getParams("--buildPath=")&&fs.existsSync("config/paths.js")?require("../../config/paths"):{},tasks=[getGitPath,getDistFiles,writePath],buildPath=getParams("--buildPath=")?getParams("--buildPath="):PathArr.appBuild?PathArr.appBuild.split("/")[PathArr.appBuild.split("/").length-1]:"dist";fs.existsSync(buildPath)||(canPaly=!1,Logs("unable to get the packing path")),canPaly&&next();